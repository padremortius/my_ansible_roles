# Репо по управлению Alpine Linux

## Список ролей
- base-config
- bootstrap-server
- docker
- sshd-with-ports
- test
- update-pkgs

## Роль base-config
В рамках данной роли реализовано:
[X] Создание/удаление новых пользователей
[X] Добавление/исключение пользователей в группы
[X] Добавление ssh ключей для пользователей 
[X] Отключение ipv6 и применение настройки


## Роль bootstrap-server
В рамках данной роли: 
- [X] добавляется новый сервисный пользователь
- [X] настраивается sudoers для сервисного пользователя 
- [X] пользователю присваивается ключ ssh

## Роль docker
В рамках данной роли реализовано:
- [x] Загрузка публичного GPG-ключа от репо Docker и регистрация его в apt (файл docker.asc в директории /etc/apt/trusted.gpg.d)
- [x] Регистрация нового репо в apt (файл docker.sources в директории /etc/apt/sources.list.d)
- [x] установка необходимых пакетов из репо
- [x] настройка логирования в файл в формате json и установка ограничения в 3 файла по 10Mb

## Роль sshd-with-ports
В рамках данной роли реализована:
- [X] настройка службы sshd
  - [X] отключается авторизация по паролю
  - [X] включается авторизация только по ключу
  - [X] отключается авторизация пользователя root
  - [X] меняется порт службы sshd
  - [X] применяются настройки с перезапуском sshd

## Роль test
В рамках данной роли реализовано:
- [x] тестирование подключения к серверу
- [x] сбор facts для последующего использования в ролях


### Задачи для реализации
[X] Добавление и настройка пакета logrotate
[X] Добавление и настройка failt2ban и интеграция его с sshd
[X] Добавление и настройка Docker
[ ] Установка и настройка VPN-сервера